import{j as r}from"./jsx-runtime.D_zvdyIk.js";import{C as N}from"./Tabs.BBirmYAJ.js";import{r as c}from"./index.DatCARk7.js";import{C as k,g as u}from"./PagePanel.wKPJPzuD.js";import{C as M}from"./Panel.DNTpzIqw.js";import{C as T}from"./Link.B_Ek03dv.js";import{i as h,s as y,w as R,b as j,u as w,c as D,r as H,d as U,e as B,a as F,D as d,H as l,C as x}from"./DropTarget.BHfEh-K1.js";import{B as S}from"./Badge.DYBheGlz.js";import{C as $}from"./LinkBtn.xMx404JM.js";import{C as A}from"./IssueListPanel2.scse_gOH.js";import"./slot.CaEOsvSu.js";import"./proxy.cR2-BEcM.js";import"./Button.DyseiNRh.js";function E(s){return c.useMemo(()=>s.hooks.dragSource(),[s])}function W(s){return c.useMemo(()=>s.hooks.dragPreview(),[s])}let f=!1,b=!1;class q{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){h(!f,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return f=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{f=!1}}isDragging(){if(!this.sourceId)return!1;h(!b,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return b=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{b=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}class z{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!y(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!y(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=R({dragSource:(t,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,j(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,j(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}function L(s,e){const t=w(),n=c.useMemo(()=>new z(t.getBackend()),[t]);return D(()=>(n.dragSourceOptions=s||null,n.reconnect(),()=>n.disconnectDragSource()),[n,s]),D(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function Y(){const s=w();return c.useMemo(()=>new q(s),[s])}class G{beginDrag(){const e=this.spec,t=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(t):n={},n??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const n=this.spec,i=this.monitor,{isDragging:a}=n;return a?a(i):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,n=this.connector,{end:i}=e;i&&i(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}}function J(s,e,t){const n=c.useMemo(()=>new G(s,e,t),[e,t]);return c.useEffect(()=>{n.spec=s},[s]),n}function K(s){return c.useMemo(()=>{const e=s.type;return h(e!=null,"spec.type must be defined"),e},[s])}function Q(s,e,t){const n=w(),i=J(s,e,t),a=K(s);D(function(){if(a!=null){const[o,C]=H(a,i,n);return e.receiveHandlerId(o),t.receiveHandlerId(o),C}},[n,e,t,i,a])}function V(s,e){const t=U(s,e);h(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=Y(),i=L(t.options,t.previewOptions);return Q(t,n,i),[B(t.collect,n,i),E(i),W(i)]}const g=c.memo(({id:s,title:e,author:t,likes:n,date:i,replies:a,priority:p,type:o,isDropped:C})=>{const[{opacity:I},P]=V(()=>({type:"issue",item:{id:s,title:e},collect:m=>({opacity:m.isDragging()?.4:1})}),[s,e]),O=m=>{switch(m){case"Urgent":return"border border-orange-500";case"Bug":return"border border-red-500";case"Wish":return"border border-green-500";default:return"border border-gray-500"}};return r.jsx(T,{ref:P,"data-testid":s,className:`cursor-move! opacity-${I}`,href:`/data/issue?id=${s}&questId=1`,children:r.jsxs(k,{title:e,rightHeader:o==="funded"&&r.jsxs("div",{className:"flex items-center space-x-1 text-blue-600 py-0! px-1! flex",children:[u("energy"),r.jsx("span",{className:"text-sm",children:n})]}),className:`p-1! text-gray-800 rounded-lg border ${o==="funded"?"bg-green-50 border-green-200 hover:bg-green-100 border-green-300":"bg-white border-gray-200 hover:bg-gray-200 hover:border-gray-300"}`,children:[o==="funded"?r.jsx(F,{}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded-full"}),r.jsx("span",{className:"text-xs text-gray-600",children:t})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex space-x-4 text-xs text-gray-500",children:[r.jsxs("span",{className:"flex space-x-1",children:[u("clock")," ",i]}),o==="funded"&&r.jsxs("span",{className:"flex space-x-1",children:[u("heart")," ",a]}),o==="funded"&&r.jsxs("span",{className:"flex space-x-1 text-blue-500",children:[u("likes"),r.jsx("span",{className:"text-gray-500",children:n})]})]}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${O(p)}`,children:p})]})]})})}),v=()=>r.jsxs(M,{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsx("p",{className:"text-xs mb-2 -mt-2.5",children:"To clean the board, drag and drop the issues onto the tabs or onto roadmap."}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{className:"px-3 py-1 text-xs font-medium bg-blue-500 text-white rounded",children:"All"}),r.jsx("button",{className:"px-3 py-1 text-xs font-medium bg-red-500 text-white rounded",children:"Bug"}),r.jsx("button",{className:"px-3 py-1 text-xs font-medium bg-blue-500 text-white rounded",children:"Fix"}),r.jsx("button",{className:"px-3 py-1 text-xs font-medium bg-orange-500 text-white rounded",children:"Urgent"}),r.jsx("button",{className:"px-3 py-1 text-xs font-medium bg-green-500 text-white rounded",children:"Wish"}),r.jsx("button",{className:"px-3 py-1 text-xs font-medium bg-gray-500 text-white rounded",children:"Suggested"})]}),r.jsxs("div",{children:["Sort:",r.jsxs("select",{className:"text-xs ml-1 border border-gray-300 rounded px-2 py-1",children:[r.jsx("option",{children:"All"}),r.jsx("option",{children:"Priority"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center space-x-2 h-5",children:r.jsxs("h4",{className:"text-sm text-gray-600",children:["Public issues ",r.jsx(S,{variant:"gray",children:"20000"})]})}),r.jsx("div",{className:"flex flex-col",children:r.jsxs(d,{backend:l,children:[r.jsx(g,{id:"1",title:"Authentication fails on slow connections",author:"Serkan Balguliyev",description:"Users are experiencing authentication failures when their connection speed drops below 100ms. The system needs to handle timeouts more gracefully.",likes:24,date:"Oct 5, 2023",replies:5,readTime:"5 min",priority:"Urgent",type:"public"}),r.jsx(g,{id:"2",title:"Implement dark mode across all pages",author:"Serkan Balguliyev",description:"Many users have requested a dark mode option to reduce eye strain during night time usage. This would require implementing a theme toggle.",likes:42,date:"Oct 3, 2023",replies:5,readTime:"5 min",priority:"Urgent",type:"public"})]})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex space-x-2 h-5",children:[r.jsxs("h4",{className:"text-sm text-gray-600",children:["Funded issues ",r.jsx(S,{variant:"blue",children:"20000"})]}),r.jsx("span",{className:"text-xs text-gray-500",children:"(+12 stars to rating)"})]}),r.jsx("div",{className:"flex flex-col",children:r.jsxs(d,{backend:l,children:[r.jsx(g,{id:"3",title:"Fix responsive layout on tablet devices",author:"Serkan Balguliyev",description:"The dashboard layout breaks on iPad and other tablet devices in landscape orientation. Need to implement proper responsive breakpoints.",likes:15,date:"Oct 6, 2023",replies:6,readTime:"5 min",priority:"Bug",type:"funded"}),r.jsx(g,{id:"4",title:"Data export feature crashes with large datasets",author:"Serkan Balguliyev",description:"When attempting to export data sets larger than 10,000 records, the application crashes. We need to implement pagination or streaming.",likes:37,date:"Oct 5, 2023",replies:6,readTime:"5 min",priority:"Wish",type:"funded"}),"            "]})})]})]}),r.jsx("div",{className:"flex justify-center mt-4",children:r.jsx($,{variant:"gray",href:"/data/issue/post",children:"Add Issue"})})]}),le=()=>{const s=[{label:r.jsxs(r.Fragment,{children:["Issues ",r.jsx(S,{variant:"blue",children:"20k"})]}),key:"issues",content:r.jsx(v,{})},{label:r.jsx(d,{backend:l,children:r.jsx(x,{id:"hard-list",accept:["issue"],onDrop:e=>console.log(e),children:"Hard"})}),key:"hard",content:r.jsx(A,{})},{label:r.jsx(d,{backend:l,children:r.jsx(x,{id:"closed-list",accept:["issue"],onDrop:e=>console.log(e),children:"Closed"})}),key:"closed",content:r.jsx(v,{})},{label:r.jsx(d,{backend:l,children:r.jsx(x,{id:"detailize-list",accept:["issue"],onDrop:e=>console.log(e),children:"Detailize"})}),key:"detailize",content:r.jsx(v,{})}];return r.jsx(N,{activeTab:"issues",tabs:s})};export{le as default};
