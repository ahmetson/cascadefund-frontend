---
import Button, { ButtonVariant } from "@/components/custom-ui/Button";
import { type SectionProps, bgClassNames, BgType } from "@/types/eventTypes";
import DynamicReactImporter from "@/components/ReactComponentImporter";
import Link from "@/components/custom-ui/Link";

type Props = SectionProps;

let { title, titleClassName, actions, bg, icon, subtitle, className } =
  Astro.props;
if (bg === undefined) {
  bg = {
    sectionBgType: BgType.infoSection,
  };
}

const sectionClassName =
  `${className} ${bgClassNames[bg.sectionBgType]}` +
  (bg.overlay ? " relative overflow-hidden " : "");
---

<section class={"py-14 " + sectionClassName}>
  {
    bg.overlay === "circles" && (
      <div class="absolute inset-0 opacity-10 z-0">
        <div class="absolute top-10 left-10 w-4 h-4 bg-blue-400 dark:bg-blue-300 rounded-full" />
        <div class="absolute top-20 right-20 w-6 h-6 bg-purple-400 dark:bg-purple-300 rounded-full" />
        <div class="absolute bottom-20 left-20 w-5 h-5 bg-green-400 dark:bg-green-300 rounded-full" />
        <div class="absolute bottom-10 right-10 w-3 h-3 bg-yellow-400 dark:bg-yellow-300 rounded-full" />
        <div class="absolute top-1/2 left-1/4 w-8 h-8 bg-pink-400 dark:bg-pink-300 rounded-full" />
        <div class="absolute top-1/3 right-1/3 w-7 h-7 bg-indigo-400 dark:bg-indigo-300 rounded-full" />
      </div>
    )
  }
  {
    bg.overlay === "rectangles" && (
      <div class="absolute inset-0 opacity-20 z-0">
        <div class="absolute top-10 left-10 w-16 h-16 border border-yellow-400 dark:border-yellow-300 rounded-lg transform rotate-12" />
        <div class="absolute top-20 right-20 w-12 h-12 border border-blue-400 dark:border-blue-300 rounded-full" />
        <div class="absolute bottom-20 left-20 w-20 h-20 border border-green-400 dark:border-green-300 rounded-lg transform -rotate-12" />
        <div class="absolute bottom-10 right-10 w-8 h-8 border border-purple-400 dark:border-purple-300 rounded-full" />
      </div>
    )
  }
  <div
    class="relative inset-0 opacity-100 z-2 px-4 sm:px-6 lg:px-8 text-center"
  >
    {
      icon && (
        <div class="mb-8">
          <div class="inline-flex items-center justify-center w-16 h-16 bg-yellow-500 dark:bg-yellow-300 rounded-xs mb-6">
            <DynamicReactImporter element={icon} />
          </div>
        </div>
      )
    }
    {
      title && (
        <h1
          class={`text-4xl md:text-5xl font-bold mb-6 ${titleClassName || ""}`}
        >
          {title}
        </h1>
      )
    }
    {subtitle && <p class="text-lg opacity-90 mb-6">{subtitle}</p>}

    <slot />

    {
      actions && (
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          {actions.map((action) =>
            action.replaceWithChildren ? (
              <DynamicReactImporter element={action.children} />
            ) : action.uri ? (
              <Link uri={action.uri} className={action.className}>
                <Button
                  variant={action.variant as ButtonVariant}
                  size="lg"
                  className={action.className}
                >
                  {action.children}
                </Button>
              </Link>
            ) : (
              <Button
                size="lg"
                variant={action.variant as ButtonVariant}
                className={`${action.className}`}
                onClick={action.onClick}
              >
                {action.children}
              </Button>
            ),
          )}
        </div>
      )
    }
  </div>
</section>

<style>
  .network-bg {
    background: linear-gradient(
      135deg,
      #1a1a2e dark: bg-gray-800 0%,
      #16213e dark: bg-gray-700 50%,
      #0f3460 dark: bg-gray-600 100%
    );
  }

  .gradient-bg {
    background: linear-gradient(
      135deg,
      #667eea dark: bg-blue-300 0%,
      #764ba2 dark: bg-purple-300 100%
    );
  }
</style>
